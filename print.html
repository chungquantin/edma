<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Akashic records: The Solomon book</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Development log</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> October - 2022 </div></li><li><ol class="section"><li class="chapter-item expanded "><a href="devlog/2022/october/w1.html"><strong aria-hidden="true">1.1.</strong> Week 1: Baal</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> November - 2022</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="devlog/2022/november/w2.html"><strong aria-hidden="true">2.1.</strong> Week 2: Palmon</a></li><li class="chapter-item expanded "><a href="devlog/2022/november/w3.html"><strong aria-hidden="true">2.2.</strong> Week 3: Beleth</a></li><li class="chapter-item expanded "><a href="devlog/2022/november/w4.html"><strong aria-hidden="true">2.3.</strong> Week 4: Purson</a></li><li class="chapter-item expanded "><a href="devlog/2022/november/w5.html"><strong aria-hidden="true">2.4.</strong> Week 5: Asmodeus</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="misc/license.html">License</a></li><li class="chapter-item expanded affix "><a href="misc/code_of_conduct.html">Code of conduct</a></li><li class="chapter-item expanded affix "><a href="misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Akashic records: The Solomon book</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/nomadiz/solomon-db//tree/master/doc" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p align="center">
<img src="https://user-images.githubusercontent.com/56880684/201497081-40976107-ef47-4a12-bf6d-ceafc8da3464.png" width="40%"/>
</p>
<h3 align="center">A distributed Gremlin-compatible graph database</h3>
<h3 align="center">Open for contribution üöÄ</h3>
<br/>
<p align="center">
 <a href="https://github.com/nomadiz/solomon-db"><img src="https://img.shields.io/badge/built_with-Rust-dca282.svg?style=flat-square"></a>
&nbsp;
<a href="https://github.com/nomadiz/solomon-db"><img src="https://img.shields.io/badge/build%20with-gremlin-green"></a>
&nbsp;
<a href="https://github.com/nomadiz/solomon-db"><img src="https://img.shields.io/github/v/release/nomadiz/solomon-db?color=%23ff00a0&include_prereleases&label=version&sort=semver&style=flat-square"></a>
&nbsp;
<a href="https://github.com/nomadiz/solomon-db/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT License-00bfff.svg?style=flat-square"></a>
</p>
<p align="center">
    <a href="https://github.com/nomadiz/solomon-db/graphs/contributors" alt="Contributors">
        <img src="https://img.shields.io/github/contributors/nomadiz/solomon-db" /></a>
    <a href="https://github.com/nomadiz/solomon-db/pulse" alt="Activity">
        &nbsp;
        <img src="https://img.shields.io/github/commit-activity/m/nomadiz/solomon-db" /></a>
    <a href="https://users.rust-lang.org/t/solomondb-in-development-gremlin-compatible-graph-database-update/84750" alt="Activity">
        &nbsp;
		<img src="https://img.shields.io/badge/Rust%20User%20Forum-follow-orange"/>
	</a>
</p>
<h2><a class="header" href="#what-is-solomondb" id="what-is-solomondb">What is SolomonDB?</a></h2>
<p><strong>SolomonDB</strong> is an open source, distributed, easy-to-use, user friendly graph database built by nomadic engineers. SolomonDB enhances the experience of working with graph database using GQL (Gremlin Query Language). SolomonDB can run in an offline mode and acts as an embedded graph database on top of <strong>RocksDB</strong>. Last but not least, SolomonDB is a database for community. It supports multiple storage layer with a set of plugins for serialization.</p>
<h2><a class="header" href="#why-is-it-named-solomon" id="why-is-it-named-solomon">Why is it named &quot;Solomon&quot;?</a></h2>
<p>Solomon is the name of a the wisest person who ever lived, King Solomon. If you have ever read Bible, you might know some stories of King Solomon. One of those stories is when King Solomon asks for wishdom. Based on that idea, Solomon DB is built as my personal side project to gain more knowledge about database internals and graph database architecture.</p>
<h2><a class="header" href="#roadmap" id="roadmap">Roadmap</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Implement RocskDB storage layer</li>
<li><input disabled="" type="checkbox" checked=""/>
Implement Redb storage layer</li>
<li><input disabled="" type="checkbox"/>
Database server</li>
<li><input disabled="" type="checkbox"/>
Embedded library</li>
<li><input disabled="" type="checkbox"/>
Support Gremlin query language</li>
<li><input disabled="" type="checkbox"/>
Multi-row, multi-table ACID transactions</li>
<li><input disabled="" type="checkbox"/>
Single-node, or highly-scalable distributed mode</li>
<li><input disabled="" type="checkbox"/>
Store structured and unstructured data</li>
<li><input disabled="" type="checkbox"/>
Client (JS / Rust / Go) library</li>
</ul>
<h2><a class="header" href="#documentation" id="documentation">Documentation</a></h2>
<p>For guidance on installation, development, deployment, and administration, see our <a href="https://nomadiz.github.io/solomon-db/">SolomonDB documentation</a>.</p>
<p>The documentation page is built using Rust Mdbook. Shoutout to Rust ecosystem. ‚ù§Ô∏è</p>
<h2><a class="header" href="#community" id="community">Community</a></h2>
<p>Join our growing community around the world, for help, ideas, and discussions regarding SurrealDB.</p>
<ul>
<li>View SolomonDB <a href="https://nomadiz.hashnode.dev/">Blog</a></li>
<li>View weekly announcement <a href="https://users.rust-lang.org/t/solomondb-gremlin-compatible-graph-database-weekly-update/84750">Rust language Forum</a></li>
</ul>
<p>Support the creator</p>
<ul>
<li><a href="https://github.com/chungquantin">Github</a></li>
<li><a href="https://twitter.com/chasechung111">Twitter</a></li>
</ul>
<h2><a class="header" href="#miscellaneous" id="miscellaneous">Miscellaneous</a></h2>
<p>The source code of Solomon DB and this manual may be found at
<a href="https://github.com/nomadiz/solomon-db">https://github.com/nomadiz/solomon-db</a>. If you find a problem, check out the
<a href="https://github.com/nomadiz/solomon-db/issues">issue tracker</a>.</p>
<p>Release notes for rustup may be found in the <a href="https://github.com/nomadiz/solomon-db/blob/master/CHANGELOG.md">CHANGELOG</a>.</p>
<h2><a class="header" href="#contributors" id="contributors">Contributors</a></h2>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#weekly-update-1-baal" id="weekly-update-1-baal">Weekly Update #1: Baal</a></h1>
<p>Date: October 2022 (26-28/11/2022)</p>
<p align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bael.jpg/220px-Bael.jpg" width="40%"/>
</p>
<blockquote>
<p>According to the Grand Grimoire, Baal (or Bael) is the head of the infernal powers. He is also the first demon listed in Wierus' Pseudomonarchia daemonum. According to Wierus, Bael is the first king of Hell with estates in the east. He has three heads: a toad, a man, and a cat. He also speaks in a raucous, but well-formed voice, and commands 66 legions. Bael teaches the art of invisibility, and may be the equivalent of Baal or Baalzebub, one of the Seven princes of Hell. - Wikipedia</p>
</blockquote>
<h2><a class="header" href="#commits-on-oct-26-2022" id="commits-on-oct-26-2022">Commits on Oct 26, 2022</a></h2>
<h3><a class="header" href="#description" id="description">Description</a></h3>
<p>A soft beginning. I just spend some time to read graph database book and learning concepts, requirements needed to construct Solomon DB.</p>
<h3><a class="header" href="#detail-explanation" id="detail-explanation">Detail explanation</a></h3>
<p>There are a few interesting learning outcomes acquired here:</p>
<p>These concepts are not too complicated actually. Not talking about native graph database, non-native graph database is more like a database wrapper which has internals built on top of other databases.</p>
<pre><code class="language-md">-   Underlying storage
-   Processing engine
-   Graph compute engine
</code></pre>
<p><em>Learnt and noted down these concepts in <strong>WIKI.md</strong>.</em></p>
<p>As this is the first commit, it only includes code to initialize a codebase and its basic layout for Rust project using <code>cargo new</code>.</p>
<pre><pre class="playground"><code class="language-rust">// A simple hello world program (db/src/main.rs)
fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre></pre>
<h3><a class="header" href="#contributors-1" id="contributors-1">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-oct-28-2022" id="commits-on-oct-28-2022">Commits on Oct 28, 2022</a></h2>
<h3><a class="header" href="#description-1" id="description-1">Description</a></h3>
<p>Add <code>StorageDriver</code>, new type <code>RocksDBDriver</code>, macro <code>impl_driver_core</code> and misc implementation for <code>StorageErr</code> and <code>Status</code>.</p>
<h3><a class="header" href="#detail-explanation-1" id="detail-explanation-1">Detail explanation</a></h3>
<p>Things getting more exciting when we touch advanced syntaxes in Rust: <a href="https://doc.rust-lang.org/rust-by-example/generics/new_types.html"><code>New Type</code></a> design pattern and <a href="https://doc.rust-lang.org/book/ch19-06-macros.html"><code>Macro</code></a>. Before jumping right into the main point of today changes, one of a missing features in Rust compared to other OOP languages must be mentioned first is the ability to do <strong>inheritance</strong>.</p>
<p>With what Rust provides so far, it is quite tricky to construct an inheritable <code>struct</code> object. At first, you may think doing OOP in Rust is quite bad as inheritance is a core component of any OOP design. However, if you learn more about OOP, you will know <code>Inheritance &lt; Composition</code>. This is quite off topic, but there is a few discussions and articles related to the way Rust do OOP that you should read:</p>
<ul>
<li><a href="https://internals.rust-lang.org/t/why-not-inheritance/5738/14">Rust Internals | Discussion - Why not inheritance?</a></li>
<li><a href="http://smallcultfollowing.com/babysteps/blog/2015/05/05/where-rusts-enum-shines/">Where Rust enum shines?</a></li>
</ul>
<p>Briefly, even though Rust does not have an obvious OOP feature like inheritance, it still provides several approaches: <code>Trait</code>, <code>New type</code>, <code>Macro</code> or <code>Enum</code> to do thing in a inheritance way but cleaner as things are separated elegantly.</p>
<p><strong>New Type design pattern for RocksDB Driver</strong></p>
<p>&quot;<em>The <code>newtype</code> idiom gives compile time guarantees that the right type of value is supplied to a program</em>&quot; - Rust book.</p>
<p>I apply the design to implement RocksDB Driver. The idea is to have a parent <code>struct</code> called <code>StorageDriver</code> and we will build a new type <code>RocksDBDriver</code> from that.</p>
<pre><code class="language-rs">pub struct StorageDriver&lt;T&gt; {
 pub db_instance: Option&lt;T&gt;,
 pub path: String,
}

pub struct RocksDBDriver(StorageDriver&lt;DB&gt;);
</code></pre>
<p>However, <code>NewType</code> design does not exactly like inheritance. For example, if you want to get field <code>db_instance</code> from <code>RocksDBDriver</code>, you can't do <code>self.db_instance</code> but <code>self.0.db.instance</code>. Can imagine <code>db_instance</code> is inside <code>StorageDriver</code> while <code>StorageDriver</code> is wrapped inside new type <code>RocksDBDriver</code>. This would make the syntax looks a bit dirty. The solution I used to handle this case is <code>Macro</code>.</p>
<p>Macro provides an ability to maximize the power of Rust syntax. I wrote a macro to implement all below methods used inside any <code>impl</code> calling to <code>impl_driver_core</code>. Then to get the inner of new type, we just have to use <code>get_core</code>.</p>
<pre><code class="language-rs">macro_rules! impl_driver_core {
 ($DbType: ty) =&gt; {
  fn get_core(self: &amp;mut Self) -&gt; &amp;mut StorageDriver&lt;$DbType&gt; {
   &amp;mut self.0
  }
 };
}

pub(crate) use impl_driver_core;
</code></pre>
<p>Struct <code>RocksDBDriver</code> now becomes:</p>
<pre><code class="language-rs">impl RocksDBDriver {
 super::core::impl_driver_core!(DB);

 /// # Initializing RocksDB driver
 pub fn initialize(self: &amp;mut Self, cf_name: &amp;String, options: rocksdb::Options) {
  let core = self.get_core();
  ...
 }
}
</code></pre>
<h3><a class="header" href="#contributors-2" id="contributors-2">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#weekly-update-2-palmon" id="weekly-update-2-palmon">Weekly Update #2: Palmon</a></h1>
<p>Date: November 2022 (1-7/11/2022)</p>
<p align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Paimon.jpg/180px-Paimon.jpg" width="40%"/>
</p>
<blockquote>
<p>Palmon is one of the Kings of Hell, more obedient to Lucifer than other kings are, and has two hundred legions of demons under his rule. He has a great voice and roars as soon as he comes, speaking in this manner for a while until the conjurer compels him and then he answers clearly the questions he is asked. When a conjurer invokes this demon he must look towards the northwest, the direction of Paimon's house, and when Paimon appears he must be allowed to ask the conjurer what he wishes and be answered, in order to obtain the same from him. - Wikipedia</p>
</blockquote>
<h2><a class="header" href="#commits-on-nov-1-2022" id="commits-on-nov-1-2022">Commits on Nov 1, 2022</a></h2>
<h3><a class="header" href="#description-2" id="description-2">Description</a></h3>
<p>The prior implementation of <code>RocksDBDriver</code> was using the database instance initialized using <code>DB</code> object. And all methods are called from the object <code>DB</code> instance too. However, this approach has some limitations in terms of concurrency operations. Briefly, I migrate it from using <code>DB</code> to handling operations using transactions - a better control flow approach. Instead of using <code>TransactionDB</code>, I choose <code>OptimisticTransactionDB</code> which is more efficient for read contention database, correct me if I am wrong.</p>
<p>You can read more about this in <a href="https://github.com/facebook/rocksdb/wiki/Transactions#optimistictransactiondb">RocksDB Wiki</a></p>
<h3><a class="header" href="#detail-explanation-2" id="detail-explanation-2">Detail explanation</a></h3>
<p>Even though there is only one commit and only today, this commit has a lot of code refractors. An obvious refractor is migrating from <code>Driver</code> to <code>Adapter</code> which follows adapter pattern.</p>
<ul>
<li><code>StorageDriver</code> to <code>StorageAdapter</code></li>
<li><code>RocksDBDriver</code> to <code>RocksDBAdapter</code></li>
</ul>
<p>Walk through the implementation of <code>StorageAdapter</code>, we have</p>
<pre><code class="language-rs">pub struct StorageAdapter&lt;T&gt; {
    pub name: StorageAdapterName,
    pub db_instance: Pin&lt;Arc&lt;T&gt;&gt;,
    pub variant: StorageVariant,
}
</code></pre>
<p>You may notice the use of generic type <code>Pin&lt;Arc&lt;T&gt;&gt;</code>. Explain more about why I wrote this. <code>Pin</code> trait will pin the object in a memory, which means it can't be move to a different location in a memory, for example, using <code>std::mem::swap</code>. Inside the <code>Pin</code> type, we have <code>Arc</code> or <strong>Atomically Reference Counted</strong>.<code>Arc</code> type shares ownership between threads, which is different from single threaded type <code>Rc</code>. Hence, this is usually used for handling multi-threaded operations and it is suitable for our distributed database design.</p>
<p>New method added to <code>RocksDBAdapter</code> to create a transaction</p>
<pre><code class="language-rs">pub fn transaction(
        self: &amp;'static Self,
        w: bool,
        r: bool,
    ) -&gt; Result&lt;Transaction&lt;TxType&gt;, Error&gt; {
        let inner = self.get_inner();
        let db_instance = &amp;inner.db_instance;
        let tx = db_instance.transaction();

        // The database reference must always outlive
        // the transaction. If it doesn't then this
        // is undefined behaviour. This unsafe block
        // ensures that the transaction reference is
        // static, but will cause a crash if the
        // datastore is dropped prematurely.
        let tx = unsafe {
            std::mem::transmute::&lt;
                rocksdb::Transaction&lt;'_, OptimisticTransactionDB&gt;,
                rocksdb::Transaction&lt;'static, OptimisticTransactionDB&gt;,
            &gt;(tx)
        };

        Ok(Transaction::&lt;TxType&gt;::new(tx, w, r))
    }
</code></pre>
<p>There is a head-aching concept in this method, we have an unsafe method use <code>std::mem::transmute</code>. This is not recommended to use as it transform the lifetime of an object. The reason why we use this method here is because, we need to cast the original lifetime of <code>OptimisticTransactionDB</code> to static as we want the transaction remains as long as it can until the program stops. This is referenced from the source code of <strong>SurrealDB</strong>.</p>
<p>On the other hand, we have an implementation for internal transaction</p>
<pre><code class="language-rs">impl Transaction&lt;TxType&gt;
</code></pre>
<p>Any storage adapter can be understand as a bridge to create transaction, it does not store any transaction value. This separation provides the ability to control a single transaction each operation instead of a whole <code>db_instance</code>.</p>
<h3><a class="header" href="#contributors-3" id="contributors-3">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-2-2022" id="commits-on-nov-2-2022">Commits on Nov 2, 2022</a></h2>
<h3><a class="header" href="#description-3" id="description-3">Description</a></h3>
<ul>
<li>Enhancing the development experience by configuring the CI/CD pipeline using Github Actions.</li>
<li>Implement basic methods of RocksDB OptimisticDB transaction</li>
</ul>
<h3><a class="header" href="#detail-explanation-3" id="detail-explanation-3">Detail explanation</a></h3>
<p>There are two workflows added:</p>
<ul>
<li>Formatter (check + apply) workflow: Use <code>cargo clippy</code> and <code>cargo fmt</code> to format and lint the repo.</li>
<li>Test: Run <code>cargo test</code> on the workspace whenever there's an update to <code>master</code> branch</li>
</ul>
<p>Every datastore transaction will be marked generically as DBTransaction or Distributed Database Transaction. This is implied by Solomon DB technical directory. Transaction will implement a trait that requires these below method</p>
<pre><code class="language-rs">// Check if closed
fn closed(&amp;self) -&gt; bool;
// Cancel a transaction
fn cancel(&amp;mut self) -&gt; Result&lt;(), Error&gt;;
// Commit a transaction
fn commit(&amp;mut self) -&gt; Result&lt;(), Error&gt;;
// Check if a key exists
fn exi&lt;K&gt;(&amp;mut self, key: K) -&gt; Result&lt;bool, Error&gt;
where
K: Into&lt;Key&gt;;
// Fetch a key from the database
fn get&lt;K&gt;(&amp;mut self, key: K) -&gt; Result&lt;Option&lt;Val&gt;, Error&gt;;
// Insert or update a key in the database
fn set&lt;K, V&gt;(&amp;mut self, key: K, val: V) -&gt; Result&lt;(), Error&gt;;
// Insert a key if it doesn't exist in the database
fn put&lt;K, V&gt;(&amp;mut self, key: K, val: V) -&gt; Result&lt;(), Error&gt;;
// Delete a key
fn del&lt;K&gt;(&amp;mut self, key: K) -&gt; Result&lt;(), Error&gt;;
</code></pre>
<h3><a class="header" href="#contributors-4" id="contributors-4">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-4-2022" id="commits-on-nov-4-2022">Commits on Nov 4, 2022</a></h2>
<h3><a class="header" href="#description-4" id="description-4">Description</a></h3>
<p>Write a new macro to auto generate test code for datastore adapter. Whenever there's a new datastore implemented, we can add it to the test suite easily by</p>
<pre><code class="language-rs">full_test_impl!(RocksDBAdapter::default());
</code></pre>
<p>This code implementation is referenced from <a href="https://github.com/indradb/indradb/blob/master/lib/src/tests/macros.rs">IndraDB</a>. On the other hand, these commits add a new feature tag called <code>test-suite</code> which must be declared to allow all test runs.</p>
<pre><code class="language-diff">[features]
default = [&quot;kv-rocksdb&quot;]
kv-rocksdb = [&quot;dep:rocksdb&quot;]
+ test-suite = []
</code></pre>
<p>To run <code>cargo test</code> or <code>cargo nextest</code> enabling the <code>test-suite</code> feature, can follow these commands to run</p>
<pre><code class="language-powershell">cargo test --features test-suite
</code></pre>
<pre><code class="language-powershell">cargo nextest run --features test-suite
</code></pre>
<h3><a class="header" href="#detail-explanations" id="detail-explanations">Detail explanations</a></h3>
<p>The logic behind the new macro is not too complicated, the macro <code>define_test!</code> receive any <code>datastore_adapter</code> as an input along with the name for the test. This name is also a name of methods exported from crate <code>tests</code>. This approach is required to overpass the type strictness of <code>DatastoreAdapter</code> as we will support multiple types of datastore adapter.</p>
<pre><code class="language-rs">/// Defines a unit test function.
#[macro_export]
macro_rules! define_test {
	($name:ident, $datastore_adapter:expr) =&gt; {
		#[tokio::test]
		async fn $name() {
			let datastore_adapter = $datastore_adapter;
			$crate::tests::$name(datastore_adapter).await;
		}
	};
}

/// Use this macro to enable the entire standard test suite.
#[macro_export]
macro_rules! full_test_impl {
	($code:expr) =&gt; {
		#[cfg(test)]
		define_test!(should_delete_key, $code);
	};
}
</code></pre>
<h3><a class="header" href="#contributors-5" id="contributors-5">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-5-2022" id="commits-on-nov-5-2022">Commits on Nov 5, 2022</a></h2>
<h3><a class="header" href="#description-5" id="description-5">Description</a></h3>
<p>Introducing a new struct <code>DatastoreManager</code> which is generated using macro <code>impl_datastore_manager</code>. The idea behinds this implementation is to manage all datastore adapter in the cleanest way.</p>
<ul>
<li>Adding method to generate a random datastore path</li>
</ul>
<pre><code class="language-diff">/// Generate a path to store data for RocksDB
fn generate_path(id: Option&lt;i32&gt;) -&gt; String {
	 let random_id: i32 = generate_random_i32();
	 let id = &amp;id.unwrap_or(random_id).to_string();
- String::from(&quot;./.temp/rocks-&quot;) + id + &quot;.db&quot;
+ let path = if cfg!(target_os = &quot;linux&quot;) {
+	 &quot;/dev/shm/&quot;.into()
+ } else {
+	 temp_dir()
+ }
+ .join(format!(&quot;solomon-rocksdb-{}&quot;, id));
+
+	path_to_string(&amp;path).unwrap()
}
</code></pre>
<ul>
<li>Adding column family to RocksDB</li>
</ul>
<p>Adding models for graph related struct: <code>Node - Label - Property - Relationship</code></p>
<h3><a class="header" href="#detail-explanation-4" id="detail-explanation-4">Detail explanation</a></h3>
<h4><a class="header" href="#a-hrefhttpsgithubcomeighteenzirocksdb_wikiblobmastercolumn-familiesmdrocksdb-column-familya" id="a-hrefhttpsgithubcomeighteenzirocksdb_wikiblobmastercolumn-familiesmdrocksdb-column-familya"><a href="https://github.com/EighteenZi/rocksdb_wiki/blob/master/Column-Families.md">RocksDB Column Family</a></a></h4>
<p>As being stated in the RocksDB Wiki:</p>
<blockquote>
<p>Each key-value pair in RocksDB is associated with exactly one Column Family.</p>
</blockquote>
<p>In SolomonDB design, there will be multiple column families specified for different set of data. For example: <strong>vertex, vertex-property, edge, edge-property and</strong> <strong>label</strong>. All methods of RocksDB transaction will include a column family attribute. For example, the <code>get</code> method</p>
<pre><code class="language-diff">/// Fetch a key from the database
- async fn get&lt;K: Into&lt;Key&gt; + Send&gt;(&amp;mut self, key: K) -&gt; Result&lt;Option&lt;Val&gt;, Error&gt;;
+ async fn get&lt;K: Into&lt;Key&gt; + Send&gt;(&amp;mut self, cf: CF, key: K) -&gt; Result&lt;Option&lt;Val&gt;, Error&gt;;
</code></pre>
<h4><a class="header" href="#a-hrefhttpsgithubcomopencypheropencypherblobmasterdocsproperty-graph-modeladocproperty-graph-designa" id="a-hrefhttpsgithubcomopencypheropencypherblobmasterdocsproperty-graph-modeladocproperty-graph-designa"><a href="https://github.com/opencypher/openCypher/blob/master/docs/property-graph-model.adoc">Property Graph Design</a></a></h4>
<p>Not sure but I remember this has been mentioned in a very first commit log, our graph database will follow the structure of <code>Property Graph</code>.</p>
<ul>
<li>
<p><strong>Vertex</strong>: Common object in every graph model. In Property Graph, vertex is more versatile. It has multiple properties, it can be considered as a document in NoSQL database. Vertex can also have multiple labels to identify itself.</p>
</li>
<li>
<p><strong>Relationship</strong>: Or edge in single relational database. Indicates the link between two vertex. However, relationship can have properties too. It also has a type, for example, if two <code>LOVER</code> nodes connect, the relationship type should be <code>LOVE</code>. Defined as <code>source_vertex -&gt; relationship -&gt; target_vertex</code>.</p>
</li>
<li>
<p><strong>Property</strong>: Define attribute type and name of object field. For example, vertex (or node) can have name, age, birthday and relationship can also have name. Structure of <code>property</code> is <code>uuid | name | type</code>. Property of each core objects (node and relationship) will be stored in a <code>HashMap&lt;Uuid, Vec&lt;u8&gt;&gt;</code> where <code>Uuid = Property ID</code> and <code>Vec&lt;u8&gt; = Byte value for that property</code></p>
</li>
<li>
<p><strong>Label</strong>: Vertex can have multiple labels. For example, one vertex can be a Person, Programmer and Employee at the same time. This can be misunderstood with <code>Property</code>. However, they are not the same. Labels are used for marking node instead of defining attributes.</p>
</li>
</ul>
<h3><a class="header" href="#contributors-6" id="contributors-6">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-6-2022" id="commits-on-nov-6-2022">Commits on Nov 6, 2022</a></h2>
<h3><a class="header" href="#description-6" id="description-6">Description</a></h3>
<ul>
<li>Write DEVLOG for 2022 October CHANGLOG and November 1st commits</li>
</ul>
<h3><a class="header" href="#detail-explanation-5" id="detail-explanation-5">Detail explanation</a></h3>
<p>In facts, I did try to add a Github Actions workflows to auto generate Github CHANGELOG. However, it did not work as expected so I just decide to write CHANGELOG on my own.</p>
<pre><code class="language-yaml">name: Changelog
on:
    release:
        types:
            - created
jobs:
    changelog:
        runs-on: ubuntu-20.04
        steps:
            - name: &quot;‚úèÔ∏è Generate release changelog&quot;
              uses: heinrichreimer/github-changelog-generator-action@v2.3
              with:
                  token: ${{ secrets.GITHUB_TOKEN }}
</code></pre>
<h3><a class="header" href="#contributors-7" id="contributors-7">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-7-2022" id="commits-on-nov-7-2022">Commits on Nov 7, 2022</a></h2>
<h3><a class="header" href="#description-7" id="description-7">Description</a></h3>
<ul>
<li>Updating Rust compiler version to support new feature in Rust <code>1.65.0</code>: <code>Generic Associated Type</code>.</li>
<li>Adding <code>CassandraDB</code></li>
<li>Write two new methods for <code>Vertex</code> controller</li>
</ul>
<h3><a class="header" href="#detail-explanation-6" id="detail-explanation-6">Detail explanation</a></h3>
<p>Generic Associated Type is not new and it is common in Rust <code>nightly</code> channel. However, it was only officially released to <code>stable</code> channel in the latest version. Based on the given definition:</p>
<blockquote>
<p>Generic associated types are an extension that permit associated types to have generic parameters. This allows associated types to capture types that may include generic parameters that came from a trait method. These can be lifetime or type parameters.</p>
</blockquote>
<p>Here is how GAT used in SolomonDB code. We no longer have to care about <code>Generic Type</code> passed between structs. On the other hand, <code>GAT Transaction</code> force all implemented <code>Transaction</code> type to be SimpleTransaction.</p>
<pre><code class="language-diff">#[async_trait]
- pub trait DatastoreAdapter&lt;T: SimpleTransaction&gt; {
+ pub trait DatastoreAdapter {
+   type Transaction: SimpleTransaction;
	// # Create new database transaction
	// Set `rw` default to false means readable but not readable
- fn transaction(&amp;self, rw: bool) -&gt; Result&lt;T, Error&gt;;
+ fn transaction(&amp;self, rw: bool) -&gt; Result&lt;Self::Transaction, Error&gt;;

	fn default() -&gt; Self;
</code></pre>
<p>With GAT, we can make a fully reusable struct <code>DatastoreAdapter</code> and get rid of declaring <code>Transaction</code> generic type like <code>RocksDBTransaction</code>. The implementation of <code>DatastoreAdapter</code> instance for <code>RocksDB</code> will be</p>
<pre><code class="language-diff">#[async_trait]
- impl DatastoreAdapter&lt;RocksDBTransaction&gt; for RocksDBAdapter {
+ impl DatastoreAdapter for RocksDBAdapter {
+ type Transaction = RocksDBTransaction;

	fn default() -&gt; Self {
		let path = &amp;RocksDBAdapter::generate_path(None);
		RocksDBAdapter::new(path, None).unwrap()
</code></pre>
<p>Super clean right? Worth a try if you have not updated yet.</p>
<h3><a class="header" href="#contributors-8" id="contributors-8">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#weekly-update-3-beleth" id="weekly-update-3-beleth">Weekly Update #3: Beleth</a></h1>
<p>Date: November 2022 (8-13/11/2022)</p>
<p align="center">
<img src="https://tarot.vn/wp-content/uploads/2015/12/72-demons-evoked-by-king-solomon-part-i13.jpg" width="40%"/>
</p>
<blockquote>
<p>Beleth is a mighty and terrible king of Hell, who has eighty-five legions of demons under his command. He rides a warhorse, and all kind of music is heard before him, according to most authors on demonology and the most known grimoires. According to Pseudomonarchia Daemonum, Ham, son of Noah, was the first in invoking him after the flood, and wrote a book on mathematics with his help. - Wikipedia</p>
</blockquote>
<h2><a class="header" href="#commits-on-nov-8-2022" id="commits-on-nov-8-2022">Commits on Nov 8, 2022</a></h2>
<h3><a class="header" href="#description-8" id="description-8">Description</a></h3>
<ul>
<li>Adding macro to avoid duplicate of controller implementation</li>
<li>Update <code>static</code> column family names</li>
<li>Implement basic methods for <code>LabelController</code> and <code>VertexController</code>. These methods allow us to mutate and query data from <code>vertex</code> database.</li>
</ul>
<h3><a class="header" href="#detail-explanation-7" id="detail-explanation-7">Detail explanation</a></h3>
<p>Add more column family name to the global variable</p>
<pre><code class="language-rs">pub const CF_NAMES: [&amp;str; 4] = [&quot;test_suite:v1&quot;, &quot;vertices:v1&quot;, &quot;labels:v1&quot;, &quot;edges:v1&quot;];
</code></pre>
<p>How <code>LabelController</code> and <code>VertexController</code> implemented using the macro</p>
<pre><code class="language-rs">impl_controller!(get RocksDBAdapter; from rocks_db for LabelController);
impl_controller!(get RocksDBAdapter; from rocks_db for VertexController);
</code></pre>
<h3><a class="header" href="#contributors-9" id="contributors-9">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-10-2022" id="commits-on-nov-10-2022">Commits on Nov 10, 2022</a></h2>
<h3><a class="header" href="#description-9" id="description-9">Description</a></h3>
<ul>
<li>Adding more methods to controllers</li>
<li>Refractor <code>impl_controller</code> macro to make it cleaner and more versatile</li>
<li>Add a property controller <code>PropertyController</code> to manage properties</li>
<li>Add feature for <code>CassandraDB</code>: <code>kv-cassandradb</code></li>
<li>New method <code>multi_get</code> for database transaction</li>
<li>Implement a <code>GlobalConfig</code></li>
</ul>
<h3><a class="header" href="#detail-explanation-8" id="detail-explanation-8">Detail explanation</a></h3>
<p>A new approach to implement a controller. Now we can identify the controller identifier and its column family.</p>
<pre><code class="language-rs">impl_controller!(LabelController(&quot;labels:v1&quot;));
impl_controller!(VertexController(&quot;vertices:v1&quot;));
impl_controller!(PropertyController(&quot;properties:v1&quot;));
</code></pre>
<p>New method added for database transaction to retrieve multiple data at once</p>
<pre><code class="language-rs">async fn multi_get&lt;K&gt;(&amp;self, cf: CF, keys: Vec&lt;K&gt;) -&gt; Result&lt;Vec&lt;Option&lt;Val&gt;&gt;, Error&gt;
	where
		K: Into&lt;Key&gt; + Send + AsRef&lt;[u8]&gt;,
</code></pre>
<p>The point of <code>GlobalConfig</code> is that we don't want controller use different databases for each of them. To make it in sync, there will be a struct <code>GlobalConfig</code> storing a datastore where other controllers can reference from.</p>
<pre><code class="language-rs">macro_rules! impl_global_config {
	($datastore: ident) =&gt; {
		pub struct GlobalConfig {
			pub ds: $datastore,
		}

		impl GlobalConfig {
			pub fn new() -&gt; Result&lt;Self, Error&gt; {
				Ok(GlobalConfig {
					ds: $datastore::default(),
				})
			}
		}
	};
}
</code></pre>
<h3><a class="header" href="#contributors-10" id="contributors-10">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-11-2022" id="commits-on-nov-11-2022">Commits on Nov 11, 2022</a></h2>
<h3><a class="header" href="#description-10" id="description-10">Description</a></h3>
<p>Apply some techniques to serialize Rust struct data into bytes data. Derived from my experience with Solana development, I learnt the approach Solana codebase uses to for byte serialization and deserialization. This can be briefly described with a work <strong>Discriminator</strong>.</p>
<h3><a class="header" href="#detail-explanation-9" id="detail-explanation-9">Detail explanation</a></h3>
<p>The concept of <strong>Account Discriminator</strong> is common in Solana development using Anchor framework (<a href="https://github.com/coral-xyz/anchor/issues/10">Link to reference</a>).</p>
<p>We will take these lines of code below as an example. This code is to serialize <code>Label</code> struct into <code>Vec&lt;u8&gt;</code> and store it in our data storage.</p>
<pre><code class="language-rs">// Handle byte concatenate for label components
let _label_discriminator = serialize_discriminator(AccountDiscriminator::Label).unwrap();
let _labels = build_bytes(&amp;label_components).unwrap();
let _label_offset = &amp;build_offset(ll, uuid_len);
let (l_dis, l_offset, l) =
(_label_discriminator.as_slice(), _label_offset.as_slice(), _labels.as_slice());
let labels_concat = [l_dis, l_offset, l].concat();
</code></pre>
<p>Understanding the code, there will be three components of the bytes vector <code>Label: (account discriminator / offset / object byte data)</code></p>
<ul>
<li><code>Account Discriminator</code>: Identifier of a struct object. Below code indicates the mapped index for each object. In <code>Label</code> case, the mapped index is <code>2</code></li>
</ul>
<pre><code class="language-rs">#[derive(PartialEq, Serialize, Deserialize, Eq, Debug, Clone)]
pub enum AccountDiscriminator {
	None = 0,
	Vertex = 1,
	Label = 2,
	Property = 3,
	Relationship = 4,
}
</code></pre>
<ul>
<li><code>Offset</code>: Or it can be called <code>meta</code>, it describes the number of byte indices <code>object data</code> will occupy. For example, a string <code>hello = [68 65 6c 6c 6f]</code> will have an offset as <code>5</code> as there are 5 byte elements in the vector.</li>
</ul>
<blockquote>
<p>(NOTE: The reason why we must store metadata of the object byte data is because there might be a chance the stored data is a vector of data)</p>
</blockquote>
<ul>
<li><code>Object byte data</code>: This is obvious, the byte data of the object data. Taking the above string example, the byte data for String object <code>hello</code> is <code>hello = [68 65 6c 6c 6f]</code>.</li>
</ul>
<p>Combining all the byte component together, we get something like</p>
<pre><code class="language-rs">/// The return data of this example might not be exact
/// but it is the idea
hello = [ 2 5 68 65 6c 6c 6f ]
</code></pre>
<h3><a class="header" href="#contributors-11" id="contributors-11">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-12-2022" id="commits-on-nov-12-2022">Commits on Nov 12, 2022</a></h2>
<h3><a class="header" href="#description-11" id="description-11">Description</a></h3>
<p>Add a workflow script to automatically build and deploy a doc page to Github Pages.</p>
<h3><a class="header" href="#detail-explanation-10" id="detail-explanation-10">Detail explanation</a></h3>
<p>Rust ecosystem has a very interesting crate called <a href="https://rust-lang.github.io/mdBook/">mdbook</a> that helps developer to construct a documentation page in one click. Command to install a cargo crate</p>
<pre><code>cargo install mdbook
</code></pre>
<p>Documentation book of SolomonDB is stored in <code>dpc/src</code>. The page is hosted on <a href="https://nomadiz.github.io/solomon-db/devlog/2022/november-2022.html">SolomonDB Documentation Page</a></p>
<h3><a class="header" href="#contributors-12" id="contributors-12">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-13-2022" id="commits-on-nov-13-2022">Commits on Nov 13, 2022</a></h2>
<h3><a class="header" href="#description-12" id="description-12">Description</a></h3>
<p>Add two badges to markdown. Just a visual stuff.</p>
<h3><a class="header" href="#detail-explanation-11" id="detail-explanation-11">Detail explanation</a></h3>
<p>Here is the two badges added to the <code>README.md</code> file</p>
<p align="center">
    <a href="https://github.com/nomadiz/solomon-db/graphs/contributors" alt="Contributors">
        <img src="https://img.shields.io/github/contributors/nomadiz/solomon-db" /></a>
    <a href="https://github.com/nomadiz/solomon-db/pulse" alt="Activity">
        <img src="https://img.shields.io/github/commit-activity/m/nomadiz/solomon-db" /></a>
</p>
<h3><a class="header" href="#contributors-13" id="contributors-13">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-15-2022" id="commits-on-nov-15-2022">Commits on Nov 15, 2022</a></h2>
<h3><a class="header" href="#description-13" id="description-13">Description</a></h3>
<p>There are several keynote changes in today update.</p>
<ul>
<li>Remove <code>GlobalConfig</code>. I found a better way to make <code>Datastore</code> be referenced in multiple places. <code>Controllers</code> need <code>Datastore</code> to mutate and retrieve data from a storage.</li>
<li>Add global <code>Transaction</code> struct. This will point to a right datastore method based on a given entry.</li>
<li>Add new transaction method to <code>iterate</code> a storage</li>
</ul>
<h3><a class="header" href="#detail-explanation-12" id="detail-explanation-12">Detail explanation</a></h3>
<h4><a class="header" href="#database-reference-dbref" id="database-reference-dbref">Database Reference (DBRef)</a></h4>
<p>This is derived from <a href="https://github.com/indradb/indradb">IndraDB</a> <code>DBRef</code> struct design</p>
<pre><code class="language-rs">// Source: ./../managers.rs/*DBRef
#[derive(Copy, Clone)]
pub(crate) struct DBRef&lt;'a&gt; {
    pub db: &amp;'a DB,
    pub indexed_properties: &amp;'a HashSet&lt;models::Identifier&gt;,
}

// Referenced by SolomonDB
#[derive(Copy, Clone)]
pub struct DBRef&lt;'a&gt; {
	pub db: &amp;'a Datastore,
}
</code></pre>
<p>The purpose of this new struct is like its name <code>Database Reference (DBRef)</code>. Struct <code>Datastore</code> alone can't be referenced multiple times as it can not implement <code>Copy</code> or <code>Clone</code>. <code>DBRef</code> will take a <code>Datastore</code> and assign it with <code>'a</code> lifetime.</p>
<p>In that way, this can be referenced in multiple places.</p>
<pre><code class="language-rs">/// Assigning datastore reference to graph controllers
let path = generate_path(None);
let ds = Datastore::new(&amp;path).unwrap();
let r = DBRef::new(&amp;ds);
let vc = VertexController::new(r);
let ec = EdgeController::new(r);
let lc = LabelController::new(r);
let epc = EdgePropertyController::new(r);
</code></pre>
<h4><a class="header" href="#global-transaction-struct" id="global-transaction-struct">Global Transaction struct</a></h4>
<p>The idea is to provide a global <code>Transaction</code> struct a field <code>inner</code>. This <code>inner</code> identify a provided <code>Datastore</code>. I utilize the power of Rust enum to do generic datastore.</p>
<pre><code class="language-rs">#[allow(clippy::large_enum_variant)]
pub(super) enum Inner {
	#[cfg(feature = &quot;kv-rocksdb&quot;)]
	RocksDB(RocksDBTransaction),
}

pub struct Transaction {
	pub(super) inner: Inner,
}

#[async_trait]
impl SimpleTransaction for Transaction {
	// Example method
	fn method_name(&amp;self) -&gt; bool {
		match self {
			Transaction {
				inner: Inner::RocksDB(ds),
				..
			} =&gt; ds.method_name(),
		}
	}
}
</code></pre>
<h4><a class="header" href="#iterate-and-refix-iterate" id="iterate-and-refix-iterate">Iterate and refix iterate</a></h4>
<p>RocksDB has a very powerful method called <code>iterate</code>. This let you to iterate each key-value pair in RocksDB filtering with specific condition. On the other hand, it also have <code>prefix_iterate</code> to iterate each pair and only get pair has key contains provided <code>prefix</code>.</p>
<pre><code class="language-rs">async fn iterate(&amp;self, cf: CF) -&gt; Result&lt;Vec&lt;Result&lt;KeyValuePair, Error&gt;&gt;, Error&gt;;

async fn prefix_iterate&lt;P&gt;(
		&amp;self,
		cf: CF,
		prefix: P,
	) -&gt; Result&lt;Vec&lt;KeyValuePair, Error&gt;&gt;, Error&gt;;
</code></pre>
<h3><a class="header" href="#contributors-14" id="contributors-14">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#weekly-update-4-purson" id="weekly-update-4-purson">Weekly Update #4: Purson</a></h1>
<p>Date: November 2022 (15-23/11/2022)</p>
<p align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/94/Asmodeus.jpg/180px-Asmodeus.jpg" width="40%"/>
</p>
<blockquote>
<p>Purson is a Great King of Hell, being served and obeyed by twenty-two legions of demons. He knows of hidden things, can find treasures, and tells past, present and future. Taking a human or aerial body he answers truly of all secret and divine things of Earth and the creation of the world. He also brings good familiars. Purson is depicted as a man with the face of a lion, carrying a ferocious viper in his hand, and riding a bear. Before him, there can be heard many trumpets sounding. - Wikipedia</p>
</blockquote>
<h2><a class="header" href="#commits-on-nov-17-2022" id="commits-on-nov-17-2022">Commits on Nov 17, 2022</a></h2>
<h3><a class="header" href="#description-14" id="description-14">Description</a></h3>
<ul>
<li>Refractor from <code>controller</code> to <code>repository</code></li>
<li>Add <code>suffix_iterate</code> method</li>
<li>Adding macros for global <code>Transaction</code> to avoid code duplicate</li>
<li>Add <code>create / delete</code> method for inverted edge</li>
<li>Add deserialize from pair and iterate vertices</li>
</ul>
<h3><a class="header" href="#detail-explanation-13" id="detail-explanation-13">Detail explanation</a></h3>
<h4><a class="header" href="#controller---repository" id="controller---repository">Controller -&gt; Repository</a></h4>
<p>Calling services for edge, label or vertex as <code>controller</code> bug me sometimes. I feel it is like I am working on a web server instead of a database. So decide to change from <code>controller</code> to <code>repository</code> would be my wisest decision.</p>
<h4><a class="header" href="#suffix-iterate-method" id="suffix-iterate-method">Suffix iterate method</a></h4>
<p>Last week CHANGELOG we already mention two methods <code>iterate</code> and <code>prefix iterate</code>. So I add another method called <code>suffix iterate</code> which is a reversed version of <code>prefix iterate</code>.</p>
<h4><a class="header" href="#macros-for-global-transaction" id="macros-for-global-transaction">Macros for Global Transaction</a></h4>
<p>One of a key feature in Rust language that hooks me into it is macro. Whenever I write Rust code, I always think about how to do macro. Hence, global <code>Transaction</code> implementation has a duplication in method routing. So I write a macro for it</p>
<pre><code class="language-diff">pub fn transaction(&amp;self, write: bool) -&gt; Result&lt;Transaction, Error&gt; {
-match &amp;self.inner {
-	#[cfg(feature = &quot;kv-rocksdb&quot;)]
-	Inner::RocksDB(v) =&gt; {
-		let tx = v.transaction(write)?;
-		Ok(Transaction {
-			inner: super::tx::Inner::RocksDB(tx),
-		})
-	}
-	_ =&gt; unimplemented!(),
+macro_rules! impl_transaction_method {
+	($($x: ident feat $f: expr),*) =&gt; {
+		match &amp;self.inner {
+			$(
+				#[cfg(feature = $f)]
+				Inner::$x(v) =&gt; {
+					let tx = v.transaction(write)?;
+					Ok(Transaction {
+						inner: super::tx::Inner::$x(tx),
+					})
+				}
+			)*
+		}
+	};
+}
+impl_transaction_method!(
+	RocksDB feat &quot;kv-rocksdb&quot;,
+	CassandraDB feat &quot;kv-cassandradb&quot;
+)
}
</code></pre>
<h3><a class="header" href="#contributors-15" id="contributors-15">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-18-2022" id="commits-on-nov-18-2022">Commits on Nov 18, 2022</a></h2>
<h3><a class="header" href="#description-15" id="description-15">Description</a></h3>
<ul>
<li>Remove unused dependency using <code>cargo udeps</code></li>
<li>Update <code>test-suite</code> feature tag</li>
<li>Add <code>gremlin</code> library for graph query language</li>
<li>Refractor repository to support <code>gremlin</code></li>
<li>Create LICENSE (<code>MIT License</code>)</li>
<li>Create CODE_OF_CONDUCT.md</li>
<li>Update issue templates</li>
</ul>
<h3><a class="header" href="#detail-explanation-14" id="detail-explanation-14">Detail explanation</a></h3>
<h4><a class="header" href="#about-gremlin" id="about-gremlin">About Gremlin</a></h4>
<p>The breaking changes of this commit is definitely Gremlin. At first, SolomonDB does not have any outstanding feature or highly scalable architecture. Not until I learn about Gremlin TinkerPop.</p>
<blockquote>
<p>Gremlin is the graph traversal language of Apache TinkerPop. Gremlin is a functional, data-flow language that enables users to succinctly express complex traversals on (or queries of) their application's property graph.</p>
</blockquote>
<pre><code class="language-rs">// What are the names of Gremlin's friends' friends?
g.V().has(&quot;name&quot;,&quot;gremlin&quot;).
  out(&quot;knows&quot;).out(&quot;knows&quot;).values(&quot;name&quot;)
</code></pre>
<h4><a class="header" href="#solomondb--gremlin" id="solomondb--gremlin">SolomonDB + Gremlin</a></h4>
<p>There are no distributed graph database written in Rust that supports <strong>GQL (Gremlin Query Language)</strong> at the moment. Then I think it is a good idea for SolomonDB to be compatible with Gremlin.</p>
<p>To implement Gremlin, I fork code from this repository: <a href="https://github.com/wolf4ood/gremlin-rs">Gremlin-rs: Rust driver and tools for Apache TinkerPop‚Ñ¢.</a></p>
<p>The idea is to turn SolomonDB into &quot;Apache TinkerPop&quot; with its own Gremlin step handler. In that way, I only fork <code>gremlin-rs</code> code to generate Gremlin step bytecode.</p>
<p>This file below include example to generate Gremlin step bytecode</p>
<p><a href="https://github.com/wolf4ood/gremlin-rs/blob/master/gremlin-client/src/process/traversal/graph_traversal_source.rs">Gremlin-rs - Graph Traversal Source</a></p>
<h3><a class="header" href="#contributors-16" id="contributors-16">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h2><a class="header" href="#commits-on-nov-19-2022" id="commits-on-nov-19-2022">Commits on Nov 19, 2022</a></h2>
<h3><a class="header" href="#description-16" id="description-16">Description</a></h3>
<ul>
<li>Update DEVLOG</li>
<li>Refractor macro <code>impl_controller</code> to <code>impl_repository</code></li>
</ul>
<h3><a class="header" href="#contributors-17" id="contributors-17">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-22-2022" id="commits-on-nov-22-2022">Commits on Nov 22, 2022</a></h2>
<h3><a class="header" href="#description-17" id="description-17">Description</a></h3>
<ul>
<li>
<p>Add step handler for two basic Gremlin steps:</p>
<ul>
<li>
<p><code>addV</code>: Add a new vertex</p>
</li>
<li>
<p><code>V</code>: Traverse a graph and get vertices</p>
</li>
</ul>
</li>
<li>
<p>On the other hand, <code>AccountDiscriminator</code> and <code>Vertex</code>, <code>Edge</code>, and <code>Label</code> models are reason.</p>
</li>
<li>
<p>Implement repository for <code>Property</code> and <code>VertexProperty</code></p>
</li>
<li>
<p>Separate byte builder file and restructure byte layout</p>
</li>
</ul>
<h3><a class="header" href="#detail-explanation-15" id="detail-explanation-15">Detail explanation</a></h3>
<h4><a class="header" href="#handle-gremlin-steps" id="handle-gremlin-steps">Handle Gremlin steps</a></h4>
<p>The approach to handle returned bytecode is to loop the byte code step instructions and handle using <code>pattern matching</code> in Rust</p>
<pre><code class="language-rs">async fn process_source_step(&amp;mut self, step: &amp;Instruction) {
	let args = step.args();
	let operator = step.operator().as_str();
	let mut step_result = match operator {
		&quot;V&quot; =&gt; self.v(args).await,
		&quot;addV&quot; =&gt; self.add_v(args).await,
		&quot;E&quot; =&gt; self.e(args),
		&quot;addE&quot; =&gt; self.add_e(args),
		_ =&gt; unimplemented!(),
	};

 let source = step.operator().to_string();
	step_result.add_source(source).unwrap();

	self.steps.push_back(step_result);
}
</code></pre>
<h4><a class="header" href="#account-discriminator" id="account-discriminator">Account Discriminator</a></h4>
<p>Even though the concept of <code>Account Discriminator</code> is quite cool. However, it is redundant in our code when the codebase changed significantly.</p>
<h4><a class="header" href="#remove-graph-models-vertex-edge-and-label" id="remove-graph-models-vertex-edge-and-label">Remove graph models: Vertex, Edge and Label</a></h4>
<p>As we integrate with <code>gremlin</code>, those models are deprecated and not clean for new design. We will use structs which has a same name in <code>gremlin-rs</code>.</p>
<h3><a class="header" href="#contributors-18" id="contributors-18">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h2><a class="header" href="#commits-on-nov-23-2022" id="commits-on-nov-23-2022">Commits on Nov 23, 2022</a></h2>
<h3><a class="header" href="#description-18" id="description-18">Description</a></h3>
<ul>
<li>Change the design of <code>Vertex</code> properties field: <code>property</code> to <code>vertex property</code></li>
</ul>
<pre><code class="language-diff">- pub type VertexPropertyMap = HashMap&lt;String, Property&gt;;
+ pub type VertexPropertyMap = HashMap&lt;String, Vec&lt;VertexProperty&gt;&gt;;
</code></pre>
<h3><a class="header" href="#detail-explanation-16" id="detail-explanation-16">Detail explanation</a></h3>
<p>Gremlin documentation explain the difference between <code>Property</code> and <code>VertexProperty</code> thoroughly.</p>
<blockquote>
<p>TinkerPop introduces the concept of a VertexProperty<V>. All the properties of a Vertex are a VertexProperty. A VertexProperty implements Property and as such, it has a key/value pair. However, VertexProperty also implements Element and thus, can have a collection of key/value pairs. Moreover, while an Edge can only have one property of key &quot;name&quot; (for example), a Vertex can have multiple &quot;name&quot; properties. With the inclusion of vertex properties, two features are introduced which ultimately advance the graph modelers toolkit:</p>
</blockquote>
<h3><a class="header" href="#contributors-19" id="contributors-19">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#weekly-update-5-asmodeus" id="weekly-update-5-asmodeus">Weekly Update #5: Asmodeus</a></h1>
<p>Date: November 2022 (15-18/11/2022)</p>
<h2><a class="header" href="#commits-on-nov-24-2022" id="commits-on-nov-24-2022">Commits on Nov 24, 2022</a></h2>
<h3><a class="header" href="#description-19" id="description-19">Description</a></h3>
<h3><a class="header" href="#detail-explanation-17" id="detail-explanation-17">Detail explanation</a></h3>
<h3><a class="header" href="#contributors-20" id="contributors-20">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-25-2022" id="commits-on-nov-25-2022">Commits on Nov 25, 2022</a></h2>
<h3><a class="header" href="#description-20" id="description-20">Description</a></h3>
<h3><a class="header" href="#detail-explanation-18" id="detail-explanation-18">Detail explanation</a></h3>
<h3><a class="header" href="#contributors-21" id="contributors-21">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-26-2022" id="commits-on-nov-26-2022">Commits on Nov 26, 2022</a></h2>
<h3><a class="header" href="#description-21" id="description-21">Description</a></h3>
<h3><a class="header" href="#detail-explanation-19" id="detail-explanation-19">Detail explanation</a></h3>
<h3><a class="header" href="#contributors-22" id="contributors-22">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-29-2022" id="commits-on-nov-29-2022">Commits on Nov 29, 2022</a></h2>
<h3><a class="header" href="#description-22" id="description-22">Description</a></h3>
<h3><a class="header" href="#detail-explanation-20" id="detail-explanation-20">Detail explanation</a></h3>
<h3><a class="header" href="#contributors-23" id="contributors-23">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-nov-30-2022" id="commits-on-nov-30-2022">Commits on Nov 30, 2022</a></h2>
<h3><a class="header" href="#description-23" id="description-23">Description</a></h3>
<h3><a class="header" href="#detail-explanation-21" id="detail-explanation-21">Detail explanation</a></h3>
<h3><a class="header" href="#contributors-24" id="contributors-24">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<h1><a class="header" href="#mit-license" id="mit-license">MIT License</a></h1>
<h2><a class="header" href="#copyright-c-2022-nomadic-engineer" id="copyright-c-2022-nomadic-engineer">Copyright (c) 2022 Nomadic Engineer</a></h2>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
<h1><a class="header" href="#contributor-covenant-code-of-conduct" id="contributor-covenant-code-of-conduct">Contributor Covenant Code of Conduct</a></h1>
<h2><a class="header" href="#our-pledge" id="our-pledge">Our Pledge</a></h2>
<p>We as members, contributors, and leaders pledge to make participation in our
community a harassment-free experience for everyone, regardless of age, body
size, visible or invisible disability, ethnicity, sex characteristics, gender
identity and expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, religion, or sexual identity
and orientation.</p>
<p>We pledge to act and interact in ways that contribute to an open, welcoming,
diverse, inclusive, and healthy community.</p>
<h2><a class="header" href="#our-standards" id="our-standards">Our Standards</a></h2>
<p>Examples of behavior that contributes to a positive environment for our
community include:</p>
<ul>
<li>Demonstrating empathy and kindness toward other people</li>
<li>Being respectful of differing opinions, viewpoints, and experiences</li>
<li>Giving and gracefully accepting constructive feedback</li>
<li>Accepting responsibility and apologizing to those affected by our mistakes,
and learning from the experience</li>
<li>Focusing on what is best not just for us as individuals, but for the
overall community</li>
</ul>
<p>Examples of unacceptable behavior include:</p>
<ul>
<li>The use of sexualized language or imagery, and sexual attention or
advances of any kind</li>
<li>Trolling, insulting or derogatory comments, and personal or political attacks</li>
<li>Public or private harassment</li>
<li>Publishing others' private information, such as a physical or email
address, without their explicit permission</li>
<li>Other conduct which could reasonably be considered inappropriate in a
professional setting</li>
</ul>
<h2><a class="header" href="#enforcement-responsibilities" id="enforcement-responsibilities">Enforcement Responsibilities</a></h2>
<p>Community leaders are responsible for clarifying and enforcing our standards of
acceptable behavior and will take appropriate and fair corrective action in
response to any behavior that they deem inappropriate, threatening, offensive,
or harmful.</p>
<p>Community leaders have the right and responsibility to remove, edit, or reject
comments, commits, code, wiki edits, issues, and other contributions that are
not aligned to this Code of Conduct, and will communicate reasons for moderation
decisions when appropriate.</p>
<h2><a class="header" href="#scope" id="scope">Scope</a></h2>
<p>This Code of Conduct applies within all community spaces, and also applies when
an individual is officially representing the community in public spaces.
Examples of representing our community include using an official e-mail address,
posting via an official social media account, or acting as an appointed
representative at an online or offline event.</p>
<h2><a class="header" href="#enforcement" id="enforcement">Enforcement</a></h2>
<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported to the community leaders responsible for enforcement at
SolomonDB.
All complaints will be reviewed and investigated promptly and fairly.</p>
<p>All community leaders are obligated to respect the privacy and security of the
reporter of any incident.</p>
<h2><a class="header" href="#enforcement-guidelines" id="enforcement-guidelines">Enforcement Guidelines</a></h2>
<p>Community leaders will follow these Community Impact Guidelines in determining
the consequences for any action they deem in violation of this Code of Conduct:</p>
<h3><a class="header" href="#1-correction" id="1-correction">1. Correction</a></h3>
<p><strong>Community Impact</strong>: Use of inappropriate language or other behavior deemed
unprofessional or unwelcome in the community.</p>
<p><strong>Consequence</strong>: A private, written warning from community leaders, providing
clarity around the nature of the violation and an explanation of why the
behavior was inappropriate. A public apology may be requested.</p>
<h3><a class="header" href="#2-warning" id="2-warning">2. Warning</a></h3>
<p><strong>Community Impact</strong>: A violation through a single incident or series
of actions.</p>
<p><strong>Consequence</strong>: A warning with consequences for continued behavior. No
interaction with the people involved, including unsolicited interaction with
those enforcing the Code of Conduct, for a specified period of time. This
includes avoiding interactions in community spaces as well as external channels
like social media. Violating these terms may lead to a temporary or
permanent ban.</p>
<h3><a class="header" href="#3-temporary-ban" id="3-temporary-ban">3. Temporary Ban</a></h3>
<p><strong>Community Impact</strong>: A serious violation of community standards, including
sustained inappropriate behavior.</p>
<p><strong>Consequence</strong>: A temporary ban from any sort of interaction or public
communication with the community for a specified period of time. No public or
private interaction with the people involved, including unsolicited interaction
with those enforcing the Code of Conduct, is allowed during this period.
Violating these terms may lead to a permanent ban.</p>
<h3><a class="header" href="#4-permanent-ban" id="4-permanent-ban">4. Permanent Ban</a></h3>
<p><strong>Community Impact</strong>: Demonstrating a pattern of violation of community
standards, including sustained inappropriate behavior, harassment of an
individual, or aggression toward or disparagement of classes of individuals.</p>
<p><strong>Consequence</strong>: A permanent ban from any sort of public interaction within
the community.</p>
<h2><a class="header" href="#attribution" id="attribution">Attribution</a></h2>
<p>This Code of Conduct is adapted from the <a href="https://www.contributor-covenant.org">Contributor Covenant</a>,
version 2.0, available at
https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.</p>
<p>Community Impact Guidelines were inspired by <a href="https://github.com/mozilla/diversity">Mozilla's code of conduct
enforcement ladder</a>.</p>
<p>For answers to common questions about this code of conduct, see the FAQ at
https://www.contributor-covenant.org/faq. Translations are available at
https://www.contributor-covenant.org/translations.</p>
<h1><a class="header" href="#contributors-25" id="contributors-25">Contributors</a></h1>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
