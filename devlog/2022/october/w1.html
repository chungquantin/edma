<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Week 1: Baal - Akashic records: The Solomon book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../../favicon.png">
        
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Development log</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> October - 2022 </div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../devlog/2022/october/w1.html" class="active"><strong aria-hidden="true">1.1.</strong> Week 1: Baal</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> November - 2022</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../devlog/2022/november/w2.html"><strong aria-hidden="true">2.1.</strong> Week 2: Palmon</a></li><li class="chapter-item expanded "><a href="../../../devlog/2022/november/w3.html"><strong aria-hidden="true">2.2.</strong> Week 3: Beleth</a></li><li class="chapter-item expanded "><a href="../../../devlog/2022/november/w4.html"><strong aria-hidden="true">2.3.</strong> Week 4: Purson</a></li><li class="chapter-item expanded "><a href="../../../devlog/2022/november/w5.html"><strong aria-hidden="true">2.4.</strong> Week 5: Asmodeus</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../misc/license.html">License</a></li><li class="chapter-item expanded affix "><a href="../../../misc/code_of_conduct.html">Code of conduct</a></li><li class="chapter-item expanded affix "><a href="../../../misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Akashic records: The Solomon book</h1>

                    <div class="right-buttons">
                        
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/nomadiz/solomon-db//tree/master/doc" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#weekly-update-1-baal" id="weekly-update-1-baal">Weekly Update #1: Baal</a></h1>
<p>Date: October 2022 (26-28/11/2022)</p>
<p align="center">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bael.jpg/220px-Bael.jpg" width="40%"/>
</p>
<blockquote>
<p>According to the Grand Grimoire, Baal (or Bael) is the head of the infernal powers. He is also the first demon listed in Wierus' Pseudomonarchia daemonum. According to Wierus, Bael is the first king of Hell with estates in the east. He has three heads: a toad, a man, and a cat. He also speaks in a raucous, but well-formed voice, and commands 66 legions. Bael teaches the art of invisibility, and may be the equivalent of Baal or Baalzebub, one of the Seven princes of Hell. - Wikipedia</p>
</blockquote>
<h2><a class="header" href="#commits-on-oct-26-2022" id="commits-on-oct-26-2022">Commits on Oct 26, 2022</a></h2>
<h3><a class="header" href="#description" id="description">Description</a></h3>
<p>A soft beginning. I just spend some time to read graph database book and learning concepts, requirements needed to construct Solomon DB.</p>
<h3><a class="header" href="#detail-explanation" id="detail-explanation">Detail explanation</a></h3>
<p>There are a few interesting learning outcomes acquired here:</p>
<p>These concepts are not too complicated actually. Not talking about native graph database, non-native graph database is more like a database wrapper which has internals built on top of other databases.</p>
<pre><code class="language-md">-   Underlying storage
-   Processing engine
-   Graph compute engine
</code></pre>
<p><em>Learnt and noted down these concepts in <strong>WIKI.md</strong>.</em></p>
<p>As this is the first commit, it only includes code to initialize a codebase and its basic layout for Rust project using <code>cargo new</code>.</p>
<pre><pre class="playground"><code class="language-rust">// A simple hello world program (db/src/main.rs)
fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre></pre>
<h3><a class="header" href="#contributors" id="contributors">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>
<hr />
<h2><a class="header" href="#commits-on-oct-28-2022" id="commits-on-oct-28-2022">Commits on Oct 28, 2022</a></h2>
<h3><a class="header" href="#description-1" id="description-1">Description</a></h3>
<p>Add <code>StorageDriver</code>, new type <code>RocksDBDriver</code>, macro <code>impl_driver_core</code> and misc implementation for <code>StorageErr</code> and <code>Status</code>.</p>
<h3><a class="header" href="#detail-explanation-1" id="detail-explanation-1">Detail explanation</a></h3>
<p>Things getting more exciting when we touch advanced syntaxes in Rust: <a href="https://doc.rust-lang.org/rust-by-example/generics/new_types.html"><code>New Type</code></a> design pattern and <a href="https://doc.rust-lang.org/book/ch19-06-macros.html"><code>Macro</code></a>. Before jumping right into the main point of today changes, one of a missing features in Rust compared to other OOP languages must be mentioned first is the ability to do <strong>inheritance</strong>.</p>
<p>With what Rust provides so far, it is quite tricky to construct an inheritable <code>struct</code> object. At first, you may think doing OOP in Rust is quite bad as inheritance is a core component of any OOP design. However, if you learn more about OOP, you will know <code>Inheritance &lt; Composition</code>. This is quite off topic, but there is a few discussions and articles related to the way Rust do OOP that you should read:</p>
<ul>
<li><a href="https://internals.rust-lang.org/t/why-not-inheritance/5738/14">Rust Internals | Discussion - Why not inheritance?</a></li>
<li><a href="http://smallcultfollowing.com/babysteps/blog/2015/05/05/where-rusts-enum-shines/">Where Rust enum shines?</a></li>
</ul>
<p>Briefly, even though Rust does not have an obvious OOP feature like inheritance, it still provides several approaches: <code>Trait</code>, <code>New type</code>, <code>Macro</code> or <code>Enum</code> to do thing in a inheritance way but cleaner as things are separated elegantly.</p>
<p><strong>New Type design pattern for RocksDB Driver</strong></p>
<p>&quot;<em>The <code>newtype</code> idiom gives compile time guarantees that the right type of value is supplied to a program</em>&quot; - Rust book.</p>
<p>I apply the design to implement RocksDB Driver. The idea is to have a parent <code>struct</code> called <code>StorageDriver</code> and we will build a new type <code>RocksDBDriver</code> from that.</p>
<pre><code class="language-rs">pub struct StorageDriver&lt;T&gt; {
 pub db_instance: Option&lt;T&gt;,
 pub path: String,
}

pub struct RocksDBDriver(StorageDriver&lt;DB&gt;);
</code></pre>
<p>However, <code>NewType</code> design does not exactly like inheritance. For example, if you want to get field <code>db_instance</code> from <code>RocksDBDriver</code>, you can't do <code>self.db_instance</code> but <code>self.0.db.instance</code>. Can imagine <code>db_instance</code> is inside <code>StorageDriver</code> while <code>StorageDriver</code> is wrapped inside new type <code>RocksDBDriver</code>. This would make the syntax looks a bit dirty. The solution I used to handle this case is <code>Macro</code>.</p>
<p>Macro provides an ability to maximize the power of Rust syntax. I wrote a macro to implement all below methods used inside any <code>impl</code> calling to <code>impl_driver_core</code>. Then to get the inner of new type, we just have to use <code>get_core</code>.</p>
<pre><code class="language-rs">macro_rules! impl_driver_core {
 ($DbType: ty) =&gt; {
  fn get_core(self: &amp;mut Self) -&gt; &amp;mut StorageDriver&lt;$DbType&gt; {
   &amp;mut self.0
  }
 };
}

pub(crate) use impl_driver_core;
</code></pre>
<p>Struct <code>RocksDBDriver</code> now becomes:</p>
<pre><code class="language-rs">impl RocksDBDriver {
 super::core::impl_driver_core!(DB);

 /// # Initializing RocksDB driver
 pub fn initialize(self: &amp;mut Self, cf_name: &amp;String, options: rocksdb::Options) {
  let core = self.get_core();
  ...
 }
}
</code></pre>
<h3><a class="header" href="#contributors-1" id="contributors-1">Contributors</a></h3>
<ul>
<li>Chung Quan Tin (<a href="https://github.com/chungquantin">@chungquantin</a>)</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../../index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../../devlog/2022/november/w2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../../index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../../devlog/2022/november/w2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
